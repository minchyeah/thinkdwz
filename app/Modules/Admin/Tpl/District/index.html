<style type="text/css">
	ul.rightTools {float:right; display:block;}
	ul.rightTools li{float:left; display:block; margin-left:5px}
</style>
<div class="pageContent" style="padding:5px">
	<div class="panel" defH="30">
		<h1>基本操作</h1>
		<div>
		    <if condition="$city_id">
			<ul class="leftTools">
				<li style="padding:0 10px;"><a class="button" target="dialog" href="__URL__/add/tid/{$city_id}" target="dialog" width="510" height="280" mask="true" maxable="false"><span>新增区域</span></a></li>
			</ul>
			<else />
			<ul class="leftTools">
			    <li><a class="button" target="dialog" href="__URL__/add/type/province/tid/{$Think.request.tid}" target="dialog" width="510" height="150" mask="true" maxable="false"><span>新增省</span></a></li>
				<li><a class="button" target="dialog" href="__URL__/add/type/city/tid/{$Think.request.tid}" target="dialog" width="510" height="200" mask="true" maxable="false"><span>新增城市</span></a></li>
				<li style="padding:0 10px;"><a class="button" target="dialog" href="__URL__/add/tid/{$Think.request.tid}" target="dialog" width="510" height="280" mask="true" maxable="false"><span>新增区域</span></a></li>
			</ul>
			</if>
		</div>
	</div>
	<div class="divider"></div>
	<div class="tabs">
		<div class="tabsContent">
			<div>
				<div id="districtTree" style="float:left; display:block; overflow:auto; width:235px; border:solid 1px #CCC; padding-right:5px; line-height:21px; background:#fff">
				    <if condition="$city_id">
				     <ul class="tree expand">
				      <volist name="list" id="vo">
						<li><a href="{:U('Location/index', 'pid='.$vo['id'])}" target="ajax" rel="jbsxBox">{$vo.title}<span style="margin-left:5px;" class="btnDel treeRegion" title="删除">删除</span><span url="{:U('District/edit', 'city_id='.$vo['id'].'&pid='.$vo['id'].'&id='.$vo['id'])}" class="btnEdit treeRegion" title="编辑">编辑</span></a></li>
					  </volist>
				     </ul>
				    <else />
				    <ul class="tree expand">
				      <volist name="list" id="vo">
						<li><a href="javascript:;" style="display:inline;">{$vo.title}<span class="btnDel treeDistrict" style="margin-left:5px;" title="删除">删除</span><span url="{:U('District/edit', 'type=province&id='.$vo['id'])}" width="510" height="150" class="btnEdit treeDistrict" title="编辑">编辑</span></a>
						  <notempty name="vo.child">
							<ul>
							  <volist name="vo.child" id="svo">
								<li><a href="javascript:;">{$svo.title}<span class="btnDel treeDistrict" style="margin-left:5px;" title="删除">删除</span><span url="{:U('District/edit', 'type=city&id='.$svo['id'].'&pid='.$vo['id'])}" width="510" height="200" class="btnEdit treeDistrict" title="编辑">编辑</span></a>
								  <notempty name="svo.child">
									<ul>
									  <volist name="svo.child" id="ssvo">
										<li><a href="{:U('Location/index', 'pid='.$ssvo['id'])}" target="ajax" rel="jbsxBox">{$ssvo.title}<span style="margin-left:5px;" class="btnDel treeRegion" title="删除">删除</span><span url="{:U('District/edit', 'city_id='.$svo['id'].'&pid='.$svo['id'].'&id='.$ssvo['id'])}" class="btnEdit treeRegion" title="编辑">编辑</span></a></li>
									  </volist>
									</ul>
								  </notempty>
								</li>
							  </volist>
							</ul>
						  </notempty>
						</li>
					  </volist>
				     </ul>
				     </if>
				</div>
				<div id="jbsxBox" class="unitBox" style="margin-left:246px;">
					<!--#include virtual="list1.html" -->
				</div>
			</div>
		</div>
		<div class="tabsFooter">
			<div class="tabsFooterContent"></div>
		</div>
	</div>
</div>
<script type="text/javascript">
$(function(){
	$(".btnEdit").click(function(event){
		var $this = $(this);
		var url = $this.attr('url');
		if(!url) return false;
		var opt = {};
		opt.width = $this.attr('width');
		opt.height = $this.attr('height');
		opt.minable = false;
		opt.mixable = false;
		opt.resizable = false;
		$.pdialog.open(url, '', '编辑', opt);
		event.stopPropagation();
		return false;
	});
	$("#districtTree").css({height:($(window).height()-223)});
	$(window).resize(function(){
		$("#districtTree").css({height:($(window).height()-223)});
	});
	var $rel = $("#jbsxBox");
	var $first = $("#districtTree a[rel='jbsxBox']:first");
	$rel.loadUrl($first.attr("href"), {}, function(){
		$rel.find("[layoutH]").layoutH();
		$first.parent().addClass("selected");
	});
});
</script>
<style type="text/css">
span.treeRegion,span.treeDistrict{
	display:block;
	float:right;
}
</style>